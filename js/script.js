"use strict";var _createClass=function(){function n(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}return function(i,t,e){return t&&n(i.prototype,t),e&&n(i,e),i}}();function _classCallCheck(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}!function(a){a.fn.animateCSS=function(t,e,n){return this.each(function(){var i=a(this);e&&"function"!=typeof e||(n=e,e=0);setTimeout(function(){i.addClass("animated "+t),"hidden"==i.css("visibility")&&i.css({visibility:"visible"}),i.is(":hidden")&&i.show(),i.bind("webkitAnimationEnd animationend oAnimationEnd",function(){"function"==typeof n&&n.call(this)})},e)})}}(jQuery),function(a){a.fn.animateCSS=function(t,e,n){return this.each(function(){var i=a(this);e&&"function"!=typeof e||(n=e,e=0);setTimeout(function(){i.addClass("animated "+t),"hidden"==i.css("visibility")&&i.css({visibility:"visible"}),i.is(":hidden")&&i.show(),i.bind("webkitAnimationEnd animationend oAnimationEnd",function(){"function"==typeof n&&n.call(this)})},e)})}}(jQuery),$("html").easeScroll(),$(".svg-wrapper").click(function(i){i.preventDefault(),$("html, body").animate({scrollTop:0},1e3)}),function(){$(".menu--drop").click(function(){$(this).find(".main-drop").toggleClass("main-drop-open")}),$("section").click(function(){$(".main-drop").hasClass("main-drop-open")&&$(".main-drop").removeClass("main-drop-open")});var i=document.getElementById("links__porfolio");if(null==i);else for(var t=i.getElementsByTagName("li"),e=0;e<t.length;e++)t[e].addEventListener("click",function(i){i.preventDefault();var t=document.getElementsByClassName("p_link");t[0].className=t[0].className.replace(" p_link",""),this.className+=" p_link"});if($(".index").length){$(window).height();$(window).scroll(function(){var i=Math.trunc($(window).scrollTop()),t=$(".welcome").offset(),e=$(".header-nav");(t=Math.trunc(t.top))<=i?e.addClass("dark"):e.removeClass("dark"),300<$(this).scrollTop()?$(".svg-wrapper").addClass("expand"):$(".svg-wrapper").removeClass("expand");var n=$(".footer-card"),a=$(".map").offset(),s=i-(a=Math.trunc(a.top));a<=i?240<s||n.css("marginTop","-"+s+"px"):n.css("marginTop","26px")})}}();var $window=$(window),$body=$("body"),Slideshow=function(){function a(){var t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,a);var e={$el:$(".slideshow"),showArrows:!1,showPagination:!0,duration:1e4,autoplay:!0},n=Object.assign({},e,i);this.$el=n.$el,this.maxSlide=this.$el.find($(".js-slider-home-slide")).length,this.showArrows=1<this.maxSlide&&n.showArrows,this.showPagination=n.showPagination,this.currentSlide=1,this.isAnimating=!1,this.animationDuration=1200,this.autoplaySpeed=n.duration,this.interval,this.$controls=this.$el.find(".js-slider-home-button"),this.autoplay=1<this.maxSlide&&n.autoplay,this.$el.on("click",".js-slider-home-next",function(i){return t.nextSlide()}),this.$el.on("click",".js-slider-home-prev",function(i){return t.prevSlide()}),this.$el.on("click",".js-pagination-item",function(i){t.isAnimating||(t.preventClick(),t.goToSlide(i.target.dataset.slide))}),this.init()}return _createClass(a,[{key:"init",value:function(){if(this.goToSlide(1),this.autoplay&&this.startAutoplay(),this.showPagination){this.maxSlide;for(var i='<div class="pagination"><div class="container d-flex justify-content-end">',t=0;t<this.maxSlide;t++){i+='<span class="pagination__item js-pagination-item '+(0===t?"is-current":"")+'" data-slide='+(t+1)+">"+(t+1)+"</span>"}i+="</div></div>",this.$el.append(i)}}},{key:"preventClick",value:function(){var i=this;this.isAnimating=!0,this.$controls.prop("disabled",!0),clearInterval(this.interval),setTimeout(function(){i.isAnimating=!1,i.$controls.prop("disabled",!1),i.autoplay&&i.startAutoplay()},this.animationDuration)}},{key:"goToSlide",value:function(i){this.currentSlide=parseInt(i),this.currentSlide>this.maxSlide&&(this.currentSlide=1),0===this.currentSlide&&(this.currentSlide=this.maxSlide);var t=this.$el.find('.js-slider-home-slide[data-slide="'+this.currentSlide+'"]'),e=1===this.currentSlide?this.$el.find(".js-slider-home-slide").last():t.prev(".js-slider-home-slide"),n=this.currentSlide===this.maxSlide?this.$el.find(".js-slider-home-slide").first():t.next(".js-slider-home-slide");this.$el.find(".js-slider-home-slide").removeClass("is-prev is-next is-current"),this.$el.find(".js-pagination-item").removeClass("is-current"),1<this.maxSlide&&(e.addClass("is-prev"),n.addClass("is-next")),t.addClass("is-current"),this.$el.find('.js-pagination-item[data-slide="'+this.currentSlide+'"]').addClass("is-current")}},{key:"nextSlide",value:function(){this.preventClick(),this.goToSlide(this.currentSlide+1)}},{key:"prevSlide",value:function(){this.preventClick(),this.goToSlide(this.currentSlide-1)}},{key:"startAutoplay",value:function(){var i=this;this.interval=setInterval(function(){i.isAnimating||i.nextSlide()},this.autoplaySpeed)}},{key:"destroy",value:function(){this.$el.off()}}]),a}();if(function(){var i=!1;function t(){new Slideshow({showPagination:!0})}$window.on("load",function(){i||(i=!0,t())}),setTimeout(function(){i||(i=!0,t())},3e3),$body.addClass("is-loaded"),setTimeout(function(){$body.addClass("is-animated")},600)}(),$(".index").length){var onScroll=function(i){var e=$(document).scrollTop();$("#nav li a").each(function(){var i=$(this),t=$(i.attr("href"));t.position().top<=e&&t.position().top+t.height()>e?($("#nav li a").removeClass("active"),i.addClass("active")):i.removeClass("active")})};$(document).on("click","#svg-a",function(i){i.preventDefault(),$("html, body").animate({scrollTop:$("#about").offset().top},1e3)}),$(document).ready(function(){$(document).on("scroll",onScroll),$('#nav a[href^="#"]').on("click",function(i){i.preventDefault(),$(document).off("scroll"),$("#nav li a").each(function(){$(this).removeClass("active")}),$(this).addClass("active");var t=this.hash,e=$(t);$("html, body").stop().animate({scrollTop:e.offset().top+2},500,"swing",function(){window.location.hash=t,$(document).on("scroll",onScroll)})})})}var w=$(window).height(),maximun=0;if(w<720&&($("#links__porfolio li").each(function(){var i=parseFloat($(this).height());maximun<i&&(maximun=parseFloat(i))}),console.log($(".marketing").offset()),console.log($(".marketing").lenght),console.log(w*Math.trunc(maximun))),$(".shop").length&&($(function(){var t,e,n;$(".tabs").append("<li id='magic-line'></li>"),(n=$("#magic-line")).height($(".active").height()).css("top",$(".active a").position().top).data("origtop",n.position().top).data("origheight",n.height()),$(".tabs li a").click(function(i){i.preventDefault();var t=$(this);return t.parent().addClass("active").siblings().removeClass("active"),n.data("origtop",t.position().top).data("origheight",t.parent().height()),!1}),$(".tabs li").find("a").hover(function(){var i=$(this);t=i.position().top,e=i.parent().height(),n.css({top:t,height:e})},function(){n.css({top:n.data("origtop"),height:n.data("origheight")})})}),$(function(){$(".tab-content").find(".data-d").each(function(i){$(this).animateCSS("fadeIn",100*i)})}),$(".tabs li a").click(function(i){i.preventDefault();var t=$(this).attr("data-tab");$("ul.tabs li").removeClass("current"),$(".tabs-child").removeClass("current"),$(this).addClass("current"),$("#"+t).addClass("current"),$(".tabs-child").find(".data-d").removeClass("fadeIn"),$(".tabs-child.current").find(".data-d").each(function(i){$(this).animateCSS("fadeIn",100*i)})})),$(".product-view").length){var product=$(".product-view"),item=$(".span-thumbail");item.click(function(i){var t=$(this).css("background-image");t=t.replace("url(","").replace(")",""),$(".details-menu").css("background-image","url("+t+")"),$(".data-gallery a").attr("href",t.replace(/['"]+/g,""))})}$(".overlay-menu").length&&($(".menu-hambuguer").click(function(i){i.preventDefault(),$("body").toggleClass("is-open")}),$(".close-btn-menu").click(function(i){i.preventDefault(),$("body").toggleClass("is-open")}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGUuanMiLCJpbmRleC5qcyJdLCJuYW1lcyI6WyIkIiwiZm4iLCJhbmltYXRlQ1NTIiwiZWZmZWN0IiwiZGVsYXkiLCJjYWxsYmFjayIsInRoaXMiLCJlYWNoIiwiJHRoaXMiLCJzZXRUaW1lb3V0IiwiYWRkQ2xhc3MiLCJjc3MiLCJ2aXNpYmlsaXR5IiwiaXMiLCJzaG93IiwiYmluZCIsImNhbGwiLCJqUXVlcnkiLCJlYXNlU2Nyb2xsIiwiY2xpY2siLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiYW5pbWF0ZSIsInNjcm9sbFRvcCIsImZpbmQiLCJ0b2dnbGVDbGFzcyIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJsaW5rc19wIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImxpbmtfcCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaSIsImxlbmd0aCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjdXJyZW50X3AiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY2xhc3NOYW1lIiwicmVwbGFjZSIsIndpbmRvdyIsImhlaWdodCIsInNjcm9sbCIsIndpbmRvd0hlaWdodCIsIk1hdGgiLCJ0cnVuYyIsIndlbGNvbWUiLCJvZmZzZXQiLCJoZWFkZXIiLCJ0b3AiLCJjYXJkRm9vdGVyIiwibWFwIiwiY2FscyIsIiR3aW5kb3ciLCIkYm9keSIsIlNsaWRlc2hvdyIsIl90aGlzIiwidXNlck9wdGlvbnMiLCJhcmd1bWVudHMiLCJ1bmRlZmluZWQiLCJfY2xhc3NDYWxsQ2hlY2siLCJkZWZhdWx0T3B0aW9ucyIsIiRlbCIsInNob3dBcnJvd3MiLCJzaG93UGFnaW5hdGlvbiIsImR1cmF0aW9uIiwiYXV0b3BsYXkiLCJvcHRpb25zIiwiT2JqZWN0IiwiYXNzaWduIiwibWF4U2xpZGUiLCJjdXJyZW50U2xpZGUiLCJpc0FuaW1hdGluZyIsImFuaW1hdGlvbkR1cmF0aW9uIiwiYXV0b3BsYXlTcGVlZCIsImludGVydmFsIiwiJGNvbnRyb2xzIiwib24iLCJuZXh0U2xpZGUiLCJwcmV2U2xpZGUiLCJwcmV2ZW50Q2xpY2siLCJnb1RvU2xpZGUiLCJ0YXJnZXQiLCJkYXRhc2V0Iiwic2xpZGUiLCJpbml0Iiwic3RhcnRBdXRvcGxheSIsInBhZ2luYXRpb24iLCJpdGVtIiwiYXBwZW5kIiwiX3RoaXMyIiwicHJvcCIsImNsZWFySW50ZXJ2YWwiLCJpbmRleCIsInBhcnNlSW50IiwibmV3Q3VycmVudCIsIm5ld1ByZXYiLCJsYXN0IiwicHJldiIsIm5ld05leHQiLCJmaXJzdCIsIm5leHQiLCJfdGhpczMiLCJzZXRJbnRlcnZhbCIsIm9mZiIsImxvYWRlZCIsImxvYWQiLCJvblNjcm9sbCIsInNjcm9sbFBvcyIsImN1cnJMaW5rIiwicmVmRWxlbWVudCIsImF0dHIiLCJwb3NpdGlvbiIsInJlYWR5IiwiZSIsImhhc2giLCIkdGFyZ2V0Iiwic3RvcCIsImxvY2F0aW9uIiwidyIsIm1heGltdW4iLCJ2YWx1ZSIsInBhcnNlRmxvYXQiLCJjb25zb2xlIiwibG9nIiwibGVuZ2h0IiwidG9wUG9zIiwibmV3aGVpZ2h0IiwiJG1hZ2ljTGluZSIsImRhdGEiLCJwYXJlbnQiLCJzaWJsaW5ncyIsImhvdmVyIiwiJHRoaXNCYXIiLCJ0YWJfaWQiLCJwcm9kdWN0IiwiZXYiLCJiZyJdLCJtYXBwaW5ncyI6IjhYQUFBLFNBQUFBLEdBRUFBLEVBQUFDLEdBQUFDLFdBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FHQSxPQUFBQyxLQUFBQyxLQUFBLFdBR0EsSUFBQUMsRUFBQVIsRUFBQU0sTUFHQUYsR0FBQSxtQkFBQUEsSUFHQUMsRUFBQUQsRUFHQUEsRUFBQSxHQUlBSyxXQUFBLFdBR0FELEVBQUFFLFNBQUEsWUFBQVAsR0FHQSxVQUFBSyxFQUFBRyxJQUFBLGVBR0FILEVBQUFHLElBQUEsQ0FDQUMsV0FBQSxZQU1BSixFQUFBSyxHQUFBLFlBR0FMLEVBQUFNLE9BS0FOLEVBQUFPLEtBQUEsZ0RBQUEsV0FHQSxtQkFBQVYsR0FHQUEsRUFBQVcsS0FBQVYsU0FPQUYsTUExREEs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LFdBQUEsU0FBQSxJQUFBMkYsT0FLQTdGLEVBQUEsY0FBQW1CLE1BQUEsU0FBQStGLEdBQ0FBLEVBQUE3RixpQkFDQSxJQUFBaUgsRUFBQXRJLEVBQUFNLE1BQUF5RyxLQUFBLFlBRUEvRyxFQUFBLGNBQUEyQixZQUFBLFdBQ0EzQixFQUFBLGVBQUEyQixZQUFBLFdBRUEzQixFQUFBTSxNQUFBSSxTQUFBLFdBQ0FWLEVBQUEsSUFBQXNJLEdBQUE1SCxTQUFBLFdBQ0FWLEVBQUEsZUFBQXdCLEtBQUEsV0FBQUcsWUFBQSxVQUlBM0IsRUFBQSx1QkFBQXdCLEtBQUEsV0FBQWpCLEtBQUEsU0FBQXNGLEdBQ0E3RixFQUFBTSxNQUFBSixXQUFBLFNBQUEsSUFBQTJGLFFBd0JBN0YsRUFBQSxpQkFBQWtDLE9BQUEsQ0FDQSxJQUFBcUcsUUFBQXZJLEVBQUEsaUJBQ0F3RixLQUFBeEYsRUFBQSxrQkFFQXdGLEtBQUFyRSxNQUFBLFNBQUFxSCxHQUNBLElBQUFDLEVBQUF6SSxFQUFBTSxNQUFBSyxJQUFBLG9CQUNBOEgsRUFBQUEsRUFBQWxHLFFBQUEsT0FBQSxJQUFBQSxRQUFBLElBQUEsSUFFQXZDLEVBQUEsaUJBQUFXLElBQUEsbUJBQUEsT0FBQThILEVBQUEsS0FDQXpJLEVBQUEsbUJBQUErRyxLQUFBLE9BQUEwQixFQUFBbEcsUUFBQSxTQUFBLE9BV0F2QyxFQUFBLGlCQUFBa0MsU0FDQWxDLEVBQUEsbUJBQUFtQixNQUFBLFNBQUErRixHQUNBQSxFQUFBN0YsaUJBQ0FyQixFQUFBLFFBQUF5QixZQUFBLGFBRUF6QixFQUFBLG1CQUFBbUIsTUFBQSxTQUFBK0YsR0FDQUEsRUFBQTdGLGlCQUNBckIsRUFBQSxRQUFBeUIsWUFBQSIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCQpIHtcclxuXHJcbiAgICAkLmZuLmFuaW1hdGVDU1MgPSBmdW5jdGlvbiAoZWZmZWN0LCBkZWxheSwgY2FsbGJhY2spIHtcclxuXHJcbiAgICAgICAgLy8gUmV0dXJuIHRoaXMgdG8gbWFpbnRhaW4gY2hhaW5hYmlsaXR5XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBDYWNoZSAkKHRoaXMpIGZvciBzcGVlZFxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZGVsYXkgZXhpc3RzIG9yIGlmIGl0J3MgYSBjYWxsYmFja1xyXG4gICAgICAgICAgICBpZiAoIWRlbGF5IHx8IHR5cGVvZiBkZWxheSA9PSAnZnVuY3Rpb24nKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhIGNhbGxiYWNrLCBtb3ZlIGl0IHRvIGNhbGxiYWNrIHNvIHdlIGNhbiBjYWxsIGl0IGxhdGVyXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayA9IGRlbGF5O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgZGVsYXkgdG8gMCBmb3IgdGhlIHNldFRpbWVvdXRcclxuICAgICAgICAgICAgICAgIGRlbGF5ID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gU3RhcnQgYSBjb3VudGVyIHNvIHdlIGNhbiBkZWxheSB0aGUgYW5pbWF0aW9uIGlmIHJlcXVpcmVkXHJcbiAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGFuaW1hdGlvbiBlZmZlY3Qgd2l0aCBjbGFzc2VzXHJcbiAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnYW5pbWF0ZWQgJyArIGVmZmVjdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGVsZW1lbnIgaGFzIGJlZW4gaGlkZGVuIHRvIHN0YXJ0IHdpdGhcclxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5jc3MoJ3Zpc2liaWxpdHknKSA9PSAnaGlkZGVuJykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdCBoYXMsIHNob3cgaXQgKGFmdGVyIHRoZSBjbGFzcyBoYXMgYmVlbiBhZGRlZClcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndmlzaWJpbGl0eSc6ICd2aXNpYmxlJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgZWxlbWVudCBpcyBoaWRkZW5cclxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5pcygnOmhpZGRlbicpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNob3cgaXRcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5zaG93KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEV2ZW50IHRyaWdnZXJlZCB3aGVuIHRoZSBhbmltYXRpb24gaGFzIGZpbmlzaGVkXHJcbiAgICAgICAgICAgICAgICAkdGhpcy5iaW5kKCd3ZWJraXRBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kIG9BbmltYXRpb25FbmQnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCBhIGNhbGxiYWNrIGV2ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFeGVjdXRlIHRoZSBjYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBTcGVjaWZ5IHRoZSBkZWxheVxyXG4gICAgICAgICAgICB9LCBkZWxheSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcblxyXG59KShqUXVlcnkpOyIsIid1c2Ugc3RyaWN0JztcclxuKGZ1bmN0aW9uICgkKSB7XHJcblxyXG4gICAgJC5mbi5hbmltYXRlQ1NTID0gZnVuY3Rpb24gKGVmZmVjdCwgZGVsYXksIGNhbGxiYWNrKSB7XHJcblxyXG4gICAgICAgIC8vIFJldHVybiB0aGlzIHRvIG1haW50YWluIGNoYWluYWJpbGl0eVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gQ2FjaGUgJCh0aGlzKSBmb3Igc3BlZWRcclxuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGRlbGF5IGV4aXN0cyBvciBpZiBpdCdzIGEgY2FsbGJhY2tcclxuICAgICAgICAgICAgaWYgKCFkZWxheSB8fCB0eXBlb2YgZGVsYXkgPT0gJ2Z1bmN0aW9uJykge1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgYSBjYWxsYmFjaywgbW92ZSBpdCB0byBjYWxsYmFjayBzbyB3ZSBjYW4gY2FsbCBpdCBsYXRlclxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBkZWxheTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIGRlbGF5IHRvIDAgZm9yIHRoZSBzZXRUaW1lb3V0XHJcbiAgICAgICAgICAgICAgICBkZWxheSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFN0YXJ0IGEgY291bnRlciBzbyB3ZSBjYW4gZGVsYXkgdGhlIGFuaW1hdGlvbiBpZiByZXF1aXJlZFxyXG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBhbmltYXRpb24gZWZmZWN0IHdpdGggY2xhc3Nlc1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuYWRkQ2xhc3MoJ2FuaW1hdGVkICcgKyBlZmZlY3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBlbGVtZW5yIGhhcyBiZWVuIGhpZGRlbiB0byBzdGFydCB3aXRoXHJcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMuY3NzKCd2aXNpYmlsaXR5JykgPT0gJ2hpZGRlbicpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaXQgaGFzLCBzaG93IGl0IChhZnRlciB0aGUgY2xhc3MgaGFzIGJlZW4gYWRkZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3Zpc2liaWxpdHknOiAndmlzaWJsZSdcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgaXMgaGlkZGVuXHJcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMuaXMoJzpoaWRkZW4nKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBTaG93IGl0XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuc2hvdygpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBFdmVudCB0cmlnZ2VyZWQgd2hlbiB0aGUgYW5pbWF0aW9uIGhhcyBmaW5pc2hlZFxyXG4gICAgICAgICAgICAgICAgJHRoaXMuYmluZCgnd2Via2l0QW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZCBvQW5pbWF0aW9uRW5kJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYSBjYWxsYmFjayBldmVudFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gU3BlY2lmeSB0aGUgZGVsYXlcclxuICAgICAgICAgICAgfSwgZGVsYXkpO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxufSkoalF1ZXJ5KTtcclxuJChcImh0bWxcIikuZWFzZVNjcm9sbCgpO1xyXG4gJCgnLnN2Zy13cmFwcGVyJykuY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgc2Nyb2xsVG9wOiAwXHJcbiAgICAgIH0sIDEwMDApO1xyXG4gICAgfSk7XHJcbi8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICBOYXZcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovICBcclxuKGZ1bmN0aW9uKCkge1xyXG4gICQoJy5tZW51LS1kcm9wJykuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgXHJcbiAgICAkKHRoaXMpLmZpbmQoJy5tYWluLWRyb3AnKS50b2dnbGVDbGFzcygnbWFpbi1kcm9wLW9wZW4nKVxyXG4gIH0pXHJcbiAgJCgnc2VjdGlvbicpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgaWYgKCQoJy5tYWluLWRyb3AnKS5oYXNDbGFzcygnbWFpbi1kcm9wLW9wZW4nKSkge1xyXG4gICAgICAkKCcubWFpbi1kcm9wJykucmVtb3ZlQ2xhc3MoJ21haW4tZHJvcC1vcGVuJylcclxuICAgIH1cclxuICB9KVxyXG4gICAgY29uc3QgbGlua3NfcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaW5rc19fcG9yZm9saW8nKTtcclxuICAgIGlmIChsaW5rc19wICA9PSBudWxsKSB7XHJcbiBcclxuICAgIH1lbHNle1xyXG4gICAgICBjb25zdCBsaW5rX3AgPSBsaW5rc19wLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdsaScpO1xyXG4gIFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlua19wLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxpbmtfcFtpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50X3AgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwX2xpbmsnKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRfcFswXS5jbGFzc05hbWUgPSBjdXJyZW50X3BbMF0uY2xhc3NOYW1lLnJlcGxhY2UoJyBwX2xpbmsnLCAnJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTmFtZSArPSBcIiBwX2xpbmtcIjtcclxuXHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiBcclxuICAgIFxyXG4vKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgU2Nyb2xsIFRvIENhcmQgRm9vdGVyXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLyAgXHJcbmlmICgkKCcuaW5kZXgnKS5sZW5ndGgpIHtcclxuICAgIGxldCB3ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xyXG5cclxuICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKXtcclxuICAgICAgbGV0IHdpbmRvd0hlaWdodCA9IE1hdGgudHJ1bmMoJCh3aW5kb3cpLnNjcm9sbFRvcCgpKTtcclxuICAgICAgbGV0IHdlbGNvbWUgPSAkKCcud2VsY29tZScpLm9mZnNldCgpO1xyXG4gICAgICBsZXQgaGVhZGVyID0gJCgnLmhlYWRlci1uYXYnKTtcclxuICAgICAgd2VsY29tZSA9IE1hdGgudHJ1bmMod2VsY29tZS50b3ApO1xyXG5cclxuICAgICAgICBpZih3aW5kb3dIZWlnaHQgPj0gd2VsY29tZSApe1xyXG4gICAgICAgICAgaGVhZGVyLmFkZENsYXNzKCdkYXJrJylcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICBoZWFkZXIucmVtb3ZlQ2xhc3MoJ2RhcmsnKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIGlmICgkKHRoaXMpLnNjcm9sbFRvcCgpID4gMzAwKSB7XHJcbiAgICAgICAgJCgnLnN2Zy13cmFwcGVyJykuYWRkQ2xhc3MoJ2V4cGFuZCcpO1xyXG5cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKCcuc3ZnLXdyYXBwZXInKS5yZW1vdmVDbGFzcygnZXhwYW5kJyk7XHJcbiAgICAgICAgXHJcbiAgICAgIH1cclxuXHJcbiAgICAgICBsZXQgY2FyZEZvb3RlciA9ICQoJy5mb290ZXItY2FyZCcpO1xyXG4gICAgICAgbGV0IG1hcCA9ICQoJy5tYXAnKS5vZmZzZXQoKTtcclxuICAgICAgIG1hcCA9IE1hdGgudHJ1bmMobWFwLnRvcCk7XHJcbiAgICAgICBsZXQgY2FscyA9IHdpbmRvd0hlaWdodCAtIG1hcFxyXG4gICAgIFxyXG4gICAgICAgaWYod2luZG93SGVpZ2h0ID49IG1hcCApe1xyXG4gICAgICAgICAgaWYgKGNhbHMgPiAyNDApIHtcclxuICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICBjYXJkRm9vdGVyLmNzcygnbWFyZ2luVG9wJywgIFwiLVwiICsgY2FscyArIFwicHhcIiApXHJcbiAgICAgICAgICB9XHJcbiAgICAgICB9ZWxzZXtcclxuICAgICAgICAgIGNhcmRGb290ZXIuY3NzKCdtYXJnaW5Ub3AnLCAnMjZweCcpO1xyXG4gICAgICAgfVxyXG4gICBcclxuICAgIH0pXHJcbn1lbHNle1xyXG4gIFxyXG59XHJcbn0pKCk7XHJcblxyXG4vKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgRnVuY3Rpb24gU2xpZGVyIFBhcmFsbGF4XHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLyAgXHJcbmNvbnN0ICR3aW5kb3cgPSAkKHdpbmRvdyk7XHJcbmNvbnN0ICRib2R5ID0gJCgnYm9keScpO1xyXG5cclxuY2xhc3MgU2xpZGVzaG93IHtcclxuICAgIGNvbnN0cnVjdG9yICh1c2VyT3B0aW9ucyA9IHt9KSB7XHJcbiAgICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcclxuICAgICAgJGVsOiAkKCcuc2xpZGVzaG93JyksXHJcbiAgICAgIHNob3dBcnJvd3M6IGZhbHNlLFxyXG4gICAgICBzaG93UGFnaW5hdGlvbjogdHJ1ZSxcclxuICAgICAgZHVyYXRpb246IDEwMDAwLFxyXG4gICAgICBhdXRvcGxheTogdHJ1ZVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBsZXQgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRPcHRpb25zLCB1c2VyT3B0aW9ucyk7XHJcbiAgICBcclxuICAgICAgICB0aGlzLiRlbCA9IG9wdGlvbnMuJGVsO1xyXG4gICAgICAgIHRoaXMubWF4U2xpZGUgPSB0aGlzLiRlbC5maW5kKCQoJy5qcy1zbGlkZXItaG9tZS1zbGlkZScpKS5sZW5ndGg7XHJcbiAgICB0aGlzLnNob3dBcnJvd3MgPSB0aGlzLm1heFNsaWRlID4gMSA/IG9wdGlvbnMuc2hvd0Fycm93cyA6IGZhbHNlO1xyXG4gICAgdGhpcy5zaG93UGFnaW5hdGlvbiA9IG9wdGlvbnMuc2hvd1BhZ2luYXRpb247XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2xpZGUgPSAxO1xyXG4gICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbkR1cmF0aW9uID0gMTIwMDtcclxuICAgICAgICB0aGlzLmF1dG9wbGF5U3BlZWQgPSBvcHRpb25zLmR1cmF0aW9uO1xyXG4gICAgICAgIHRoaXMuaW50ZXJ2YWw7XHJcbiAgICAgICAgdGhpcy4kY29udHJvbHMgPSB0aGlzLiRlbC5maW5kKCcuanMtc2xpZGVyLWhvbWUtYnV0dG9uJyk7XHJcbiAgICB0aGlzLmF1dG9wbGF5ID0gdGhpcy5tYXhTbGlkZSA+IDEgPyBvcHRpb25zLmF1dG9wbGF5IDogZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuJGVsLm9uKCdjbGljaycsICcuanMtc2xpZGVyLWhvbWUtbmV4dCcsIChldmVudCkgPT4gdGhpcy5uZXh0U2xpZGUoKSk7XHJcbiAgICAgICAgdGhpcy4kZWwub24oJ2NsaWNrJywgJy5qcy1zbGlkZXItaG9tZS1wcmV2JywgKGV2ZW50KSA9PiB0aGlzLnByZXZTbGlkZSgpKTtcclxuICAgIHRoaXMuJGVsLm9uKCdjbGljaycsICcuanMtcGFnaW5hdGlvbi1pdGVtJywgZXZlbnQgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuaXNBbmltYXRpbmcpIHtcclxuICAgICAgICB0aGlzLnByZXZlbnRDbGljaygpO1xyXG4gICAgdGhpcy5nb1RvU2xpZGUoZXZlbnQudGFyZ2V0LmRhdGFzZXQuc2xpZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICAgIH1cclxuICAgIFxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgdGhpcy5nb1RvU2xpZGUoMSk7XHJcbiAgICAgIFxyXG4gICAgIC8qIGlmICh0aGlzLnNob3dBcnJvd3MpIHtcclxuICAgICAgICB0aGlzLiRlbC5hcHBlbmQoYDxkaXYgY2xhc3M9XCJjLWhlYWRlci1ob21lX2Zvb3RlclwiPlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm8tY29udGFpbmVyXCI+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImMtaGVhZGVyLWhvbWVfY29udHJvbHMgLW5vbW9iaWxlIG8tYnV0dG9uLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJqcy1wYXJhbGxheCBpcy1pbnZpZXdcIiBkYXRhLXNwZWVkPVwiMVwiIGRhdGEtcG9zaXRpb249XCJ0b3BcIiBkYXRhLXRhcmdldD1cIiNqcy1oZWFkZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJvLWJ1dHRvbiAtd2hpdGUgLXNxdWFyZSAtdG9wIGpzLXNsaWRlci1ob21lLWJ1dHRvbiBqcy1zbGlkZXItaG9tZS1wcmV2XCIgdHlwZT1cImJ1dHRvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiby1idXR0b25fbGFiZWxcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyBjbGFzcz1cIm8tYnV0dG9uX2ljb25cIiByb2xlPVwiaW1nXCI+PHVzZSB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB4bGluazpocmVmPVwiI2Fycm93LXByZXZcIj48L3VzZT48L3N2Zz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJvLWJ1dHRvbiAtd2hpdGUgLXNxdWFyZSBqcy1zbGlkZXItaG9tZS1idXR0b24ganMtc2xpZGVyLWhvbWUtbmV4dFwiIHR5cGU9XCJidXR0b25cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm8tYnV0dG9uX2xhYmVsXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgY2xhc3M9XCJvLWJ1dHRvbl9pY29uXCIgcm9sZT1cImltZ1wiPjx1c2UgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgeGxpbms6aHJlZj1cIiNhcnJvdy1uZXh0XCI+PC91c2U+PC9zdmc+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgIDwvZGl2PmApO1xyXG4gICAgICB9XHJcbiAgICAgICovXHJcbiAgICAgIGlmICh0aGlzLmF1dG9wbGF5KSB7XHJcbiAgICAgICAgdGhpcy5zdGFydEF1dG9wbGF5KCk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmICh0aGlzLnNob3dQYWdpbmF0aW9uKSB7XHJcbiAgICAgICAgbGV0IHBhZ2luYXRpb25OdW1iZXIgPSB0aGlzLm1heFNsaWRlO1xyXG4gICAgICAgIGxldCBwYWdpbmF0aW9uID0gJzxkaXYgY2xhc3M9XCJwYWdpbmF0aW9uXCI+PGRpdiBjbGFzcz1cImNvbnRhaW5lciBkLWZsZXgganVzdGlmeS1jb250ZW50LWVuZFwiPic7XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1heFNsaWRlOyBpKyspIHtcclxuICAgICAgICAgIGxldCBpdGVtID0gYDxzcGFuIGNsYXNzPVwicGFnaW5hdGlvbl9faXRlbSBqcy1wYWdpbmF0aW9uLWl0ZW0gJHsgaSA9PT0gMCA/ICdpcy1jdXJyZW50JyA6ICcnfVwiIGRhdGEtc2xpZGU9JHtpICsgMX0+JHtpICsgMX08L3NwYW4+YDtcclxuICAgICAgICAgIHBhZ2luYXRpb24gID0gcGFnaW5hdGlvbiArIGl0ZW07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHBhZ2luYXRpb24gPSBwYWdpbmF0aW9uICsgJzwvZGl2PjwvZGl2Pic7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy4kZWwuYXBwZW5kKHBhZ2luYXRpb24pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHByZXZlbnRDbGljaygpIHtcclxuICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgdGhpcy4kY29udHJvbHMucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XHJcblxyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgIHRoaXMuJGNvbnRyb2xzLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgIGlmICh0aGlzLmF1dG9wbGF5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0QXV0b3BsYXkoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgICB9LCB0aGlzLmFuaW1hdGlvbkR1cmF0aW9uKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZ29Ub1NsaWRlKGluZGV4KSB7ICAgIFxyXG4gICAgICAgIHRoaXMuY3VycmVudFNsaWRlID0gcGFyc2VJbnQoaW5kZXgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTbGlkZSA+IHRoaXMubWF4U2xpZGUpIHtcclxuICAgICAgICAgIHRoaXMuY3VycmVudFNsaWRlID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFNsaWRlID09PSAwKSB7XHJcbiAgICAgICAgICB0aGlzLmN1cnJlbnRTbGlkZSA9IHRoaXMubWF4U2xpZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IG5ld0N1cnJlbnQgPSB0aGlzLiRlbC5maW5kKCcuanMtc2xpZGVyLWhvbWUtc2xpZGVbZGF0YS1zbGlkZT1cIicrIHRoaXMuY3VycmVudFNsaWRlICsnXCJdJyk7XHJcbiAgICAgICAgY29uc3QgbmV3UHJldiA9IHRoaXMuY3VycmVudFNsaWRlID09PSAxID8gdGhpcy4kZWwuZmluZCgnLmpzLXNsaWRlci1ob21lLXNsaWRlJykubGFzdCgpIDogbmV3Q3VycmVudC5wcmV2KCcuanMtc2xpZGVyLWhvbWUtc2xpZGUnKTtcclxuICAgICAgICBjb25zdCBuZXdOZXh0ID0gdGhpcy5jdXJyZW50U2xpZGUgPT09IHRoaXMubWF4U2xpZGUgPyB0aGlzLiRlbC5maW5kKCcuanMtc2xpZGVyLWhvbWUtc2xpZGUnKS5maXJzdCgpIDogbmV3Q3VycmVudC5uZXh0KCcuanMtc2xpZGVyLWhvbWUtc2xpZGUnKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLiRlbC5maW5kKCcuanMtc2xpZGVyLWhvbWUtc2xpZGUnKS5yZW1vdmVDbGFzcygnaXMtcHJldiBpcy1uZXh0IGlzLWN1cnJlbnQnKTtcclxuICAgICAgICB0aGlzLiRlbC5maW5kKCcuanMtcGFnaW5hdGlvbi1pdGVtJykucmVtb3ZlQ2xhc3MoJ2lzLWN1cnJlbnQnKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRoaXMubWF4U2xpZGUgPiAxKSB7XHJcbiAgICAgICAgICBuZXdQcmV2LmFkZENsYXNzKCdpcy1wcmV2Jyk7XHJcbiAgICAgICAgICBuZXdOZXh0LmFkZENsYXNzKCdpcy1uZXh0Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIG5ld0N1cnJlbnQuYWRkQ2xhc3MoJ2lzLWN1cnJlbnQnKTtcclxuICAgICAgICB0aGlzLiRlbC5maW5kKCcuanMtcGFnaW5hdGlvbi1pdGVtW2RhdGEtc2xpZGU9XCInK3RoaXMuY3VycmVudFNsaWRlKydcIl0nKS5hZGRDbGFzcygnaXMtY3VycmVudCcpO1xyXG4gICAgICB9XHJcbiAgICBcclxuICAgIG5leHRTbGlkZSgpIHtcclxuICAgICAgdGhpcy5wcmV2ZW50Q2xpY2soKTtcclxuICAgICAgdGhpcy5nb1RvU2xpZGUodGhpcy5jdXJyZW50U2xpZGUgKyAxKTtcclxuICAgICAgfVxyXG4gICAgIFxyXG4gICAgICBwcmV2U2xpZGUoKSB7XHJcbiAgICAgIHRoaXMucHJldmVudENsaWNrKCk7XHJcbiAgICAgIHRoaXMuZ29Ub1NsaWRlKHRoaXMuY3VycmVudFNsaWRlIC0gMSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHN0YXJ0QXV0b3BsYXkoKSB7XHJcbiAgICAgICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGlmICghdGhpcy5pc0FuaW1hdGluZykge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLm5leHRTbGlkZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sIHRoaXMuYXV0b3BsYXlTcGVlZCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgICB0aGlzLiRlbC5vZmYoKTtcclxuICAgICAgfVxyXG4gIH1cclxuXHJcbiAgKGZ1bmN0aW9uKCkge1xyXG4gICAgIFxyXG4gICAgICBsZXQgbG9hZGVkID0gZmFsc2U7XHJcbiAgICAgIGxldCBtYXhMb2FkID0gMzAwMDsgIFxyXG4gICAgXHJcbiAgICAgIGZ1bmN0aW9uIGxvYWQoKSB7XHJcbiAgICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgIHNob3dQYWdpbmF0aW9uOiB0cnVlXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBsZXQgc2xpZGVTaG93ID0gbmV3IFNsaWRlc2hvdyhvcHRpb25zKTtcclxuICAgICAgfVxyXG4gICAgXHJcbiAgICAgIGZ1bmN0aW9uIGFkZExvYWRDbGFzcygpIHtcclxuICAgICAgICAgICRib2R5LmFkZENsYXNzKCdpcy1sb2FkZWQnKTtcclxuXHJcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICRib2R5LmFkZENsYXNzKCdpcy1hbmltYXRlZCcpO1xyXG4gICAgICAgICAgfSwgNjAwKTtcclxuICAgICAgfVxyXG4gICAgXHJcbiAgICAgICR3aW5kb3cub24oJ2xvYWQnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmKCFsb2FkZWQpIHtcclxuICAgICAgICAgICAgICBsb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGxvYWQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmKCFsb2FkZWQpIHtcclxuICAgICAgICAgICAgICBsb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGxvYWQoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgfSwgbWF4TG9hZCk7XHJcblxyXG4gICAgICBhZGRMb2FkQ2xhc3MoKTtcclxuICB9KSgpO1xyXG5cclxuLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIE5hdiBBY3RpdmVcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovICBcclxuaWYgKCQoJy5pbmRleCcpLmxlbmd0aCkge1xyXG4kKGRvY3VtZW50KS5vbignY2xpY2snLCAnI3N2Zy1hJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICQoXCJodG1sLCBib2R5XCIpLmFuaW1hdGUoeyBzY3JvbGxUb3A6ICQoJyNhYm91dCcpLm9mZnNldCgpLnRvcCB9LCAxMDAwKTtcclxufSk7XHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgICQoZG9jdW1lbnQpLm9uKFwic2Nyb2xsXCIsIG9uU2Nyb2xsKTtcclxuICAgIFxyXG4gICAgLy9zbW9vdGhzY3JvbGxcclxuICAgICQoJyNuYXYgYVtocmVmXj1cIiNcIl0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vZmYoXCJzY3JvbGxcIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgJCgnI25hdiBsaSBhJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIFxyXG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLmhhc2gsXHJcbiAgICAgICAgICAgIG1lbnUgPSB0YXJnZXQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyICR0YXJnZXQgPSAkKHRhcmdldCk7XHJcbiAgICAgICAgJCgnaHRtbCwgYm9keScpLnN0b3AoKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgJ3Njcm9sbFRvcCc6ICR0YXJnZXQub2Zmc2V0KCkudG9wKzJcclxuICAgICAgICB9LCA1MDAsICdzd2luZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFwic2Nyb2xsXCIsIG9uU2Nyb2xsKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIG9uU2Nyb2xsKGV2ZW50KXtcclxuICAgIHZhciBzY3JvbGxQb3MgPSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKTtcclxuICAgICQoJyNuYXYgbGkgYScpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBjdXJyTGluayA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHJlZkVsZW1lbnQgPSAkKGN1cnJMaW5rLmF0dHIoXCJocmVmXCIpKTtcclxuICAgICAgICBpZiAocmVmRWxlbWVudC5wb3NpdGlvbigpLnRvcCA8PSBzY3JvbGxQb3MgJiYgcmVmRWxlbWVudC5wb3NpdGlvbigpLnRvcCArIHJlZkVsZW1lbnQuaGVpZ2h0KCkgPiBzY3JvbGxQb3MpIHtcclxuICAgICAgICAgICAgJCgnI25hdiBsaSBhJykucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgIGN1cnJMaW5rLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICBjdXJyTGluay5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG59ZWxzZSB7XHJcbiAgXHJcbn1cclxuLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIEJ0biBmaWx0ZXIgc2FtZSBoZWlnaHRcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovICBcclxuIGxldCB3ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xyXG4gbGV0IG1heGltdW4gPSAwO1xyXG5pZiAodyA8IDcyMCkge1xyXG4gICQoJyNsaW5rc19fcG9yZm9saW8gbGknKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgdmFsdWUgPSBwYXJzZUZsb2F0KCQodGhpcykuaGVpZ2h0KCkpXHJcbiBcclxuICAgIGlmICggdmFsdWUgPiBtYXhpbXVuKSB7XHJcbiAgICAgIG1heGltdW4gPSBwYXJzZUZsb2F0KHZhbHVlKVxyXG4gICAgfVxyXG5cclxuXHJcbiAgfSlcclxuICBjb25zb2xlLmxvZygkKCcubWFya2V0aW5nJykub2Zmc2V0KCkpXHJcbiAgY29uc29sZS5sb2coJCgnLm1hcmtldGluZycpLmxlbmdodCk7XHJcbiAgY29uc29sZS5sb2codyAqIE1hdGgudHJ1bmMobWF4aW11bikpXHJcbiAgLy8kKCcjbGlua3NfX3BvcmZvbGlvIGxpJykuY3NzKFwiaGVpZ2h0XCIsIE1hdGgudHJ1bmMobWF4aW11bikgKyBcInB4XCIpXHJcblxyXG5cclxufVxyXG5cclxuLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIEFjdGl2ZSBkcm9wXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLyAgXHJcblxyXG5cclxuLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIE1hZ2ljIGxpbmVcclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovICBcclxuaWYgKCQoJy5zaG9wJykubGVuZ3RoKSB7XHJcbiAgICAkKGZ1bmN0aW9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgLypBY3RpdmF0ZSBkZWZhdWx0IHRhYiBjb250ZW50cyovXHJcbiAgICB2YXIgdG9wUG9zLCBuZXdoZWlnaHQsICRtYWdpY0xpbmU7XHJcblxyXG4gICAgJCgnLnRhYnMnKS5hcHBlbmQoXCI8bGkgaWQ9J21hZ2ljLWxpbmUnPjwvbGk+XCIpO1xyXG4gICAgJG1hZ2ljTGluZSA9ICQoJyNtYWdpYy1saW5lJyk7XHJcbiAgICAkbWFnaWNMaW5lLmhlaWdodCgkKCcuYWN0aXZlJykuaGVpZ2h0KCkpXHJcbiAgICAgIC5jc3MoJ3RvcCcsICQoJy5hY3RpdmUgYScpLnBvc2l0aW9uKCkudG9wKVxyXG4gICAgICAuZGF0YSgnb3JpZ3RvcCcsICRtYWdpY0xpbmUucG9zaXRpb24oKS50b3ApXHJcbiAgICAgIC5kYXRhKCdvcmlnaGVpZ2h0JywgJG1hZ2ljTGluZS5oZWlnaHQoKSk7XHJcblxyXG4gICAgJCgnLnRhYnMgbGkgYScpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgJHRoaXMucGFyZW50KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAkbWFnaWNMaW5lXHJcbiAgICAgICAgLmRhdGEoJ29yaWd0b3AnLCAkdGhpcy5wb3NpdGlvbigpLnRvcClcclxuICAgICAgICAuZGF0YSgnb3JpZ2hlaWdodCcsICR0aGlzLnBhcmVudCgpLmhlaWdodCgpKTtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLypNYWdpY2xpbmUgaG92ZXIgYW5pbWF0aW9uKi9cclxuICAgICQoJy50YWJzIGxpJykuZmluZCgnYScpLmhvdmVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgJHRoaXNCYXIgPSAkKHRoaXMpO1xyXG4gICAgICB0b3BQb3MgPSAkdGhpc0Jhci5wb3NpdGlvbigpLnRvcDtcclxuICAgICAgbmV3aGVpZ2h0ID0gJHRoaXNCYXIucGFyZW50KCkuaGVpZ2h0KCk7XHJcbiAgICAgICRtYWdpY0xpbmUuY3NzKHtcclxuICAgICAgICBcInRvcFwiOiB0b3BQb3MsXHJcbiAgICAgICAgXCJoZWlnaHRcIjogbmV3aGVpZ2h0XHJcbiAgICAgIH0pO1xyXG4gICAgfSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICRtYWdpY0xpbmUuY3NzKHtcclxuICAgICAgICBcInRvcFwiOiAkbWFnaWNMaW5lLmRhdGEoJ29yaWd0b3AnKSxcclxuICAgICAgICBcImhlaWdodFwiOiAkbWFnaWNMaW5lLmRhdGEoJ29yaWdoZWlnaHQnKVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuXHJcbiQoZnVuY3Rpb24oKSB7XHJcbiAgICQoJy50YWItY29udGVudCcpLmZpbmQoJy5kYXRhLWQnKS5lYWNoKGZ1bmN0aW9uKGluZGV4KSB7XHJcblxyXG4gICAgJCh0aGlzKS5hbmltYXRlQ1NTKCdmYWRlSW4nLCAxMDAgKiBpbmRleCk7XHJcbiAgfSk7XHJcblxyXG5cclxufSlcclxuICQoJy50YWJzIGxpIGEnKS5jbGljayhmdW5jdGlvbihlKXtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB2YXIgdGFiX2lkID0gJCh0aGlzKS5hdHRyKCdkYXRhLXRhYicpO1xyXG4gICAgICBcclxuICAgICAgJCgndWwudGFicyBsaScpLnJlbW92ZUNsYXNzKCdjdXJyZW50Jyk7XHJcbiAgICAgICQoJy50YWJzLWNoaWxkJykucmVtb3ZlQ2xhc3MoJ2N1cnJlbnQnKTtcclxuXHJcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2N1cnJlbnQnKTtcclxuICAgICAgJChcIiNcIit0YWJfaWQpLmFkZENsYXNzKCdjdXJyZW50Jyk7XHJcbiAgICAgICQoJy50YWJzLWNoaWxkJykuZmluZCgnLmRhdGEtZCcpLnJlbW92ZUNsYXNzKCdmYWRlSW4nKTtcclxuXHJcblxyXG5cclxuICAgICAgJCgnLnRhYnMtY2hpbGQuY3VycmVudCcpLmZpbmQoJy5kYXRhLWQnKS5lYWNoKGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICQodGhpcykuYW5pbWF0ZUNTUygnZmFkZUluJywgMTAwICogaW5kZXgpO1xyXG4gICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgLyokKGVsZW1zKS5lYWNoKGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgYyhpbmRleClcclxuICAgICAgICAgICQodGhpcykuZGVsYXkoMTIwMCppbmRleCkuZmFkZUluKDEwMDApO1xyXG4gICAgICB9KTsqL1xyXG5cclxuXHJcblxyXG4gICAgICAgIC8qZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgbGlzdFtpXS5jbGFzc0xpc3QuYWRkKCdmYWRlSW5VcCcpO1xyXG4gICAgICAgICAgIGxpc3RbaV0uc3R5bGUuYW5pbWF0aW9uRGVsYXkgPSBpICogNTUrXCJtc1wiXHJcbiAgICAgICAgfSovXHJcblxyXG4gICAgfSlcclxuICAgXHJcbn1lbHNle1xyXG5cclxufVxyXG4vKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgUHJldmlldyBpdGVtc1xyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8gIFxyXG5pZiAoJCgnLnByb2R1Y3QtdmlldycpLmxlbmd0aCkge1xyXG4gICAgbGV0IHByb2R1Y3QgPSAkKCcucHJvZHVjdC12aWV3Jyk7XHJcbiAgICBsZXQgaXRlbSA9ICQoJy5zcGFuLXRodW1iYWlsJyk7XHJcblxyXG4gICAgaXRlbS5jbGljayhmdW5jdGlvbihldil7XHJcbiAgICAgICBsZXQgYmcgPSAkKHRoaXMpLmNzcygnYmFja2dyb3VuZC1pbWFnZScpO1xyXG4gICAgICAgICAgYmcgPSBiZy5yZXBsYWNlKCd1cmwoJywnJykucmVwbGFjZSgnKScsJycpO1xyXG5cclxuICAgICAgICAgICQoJy5kZXRhaWxzLW1lbnUnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKCcgKyBiZyArICcpJyk7XHJcbiAgICAgICAgICAkKCcuZGF0YS1nYWxsZXJ5IGEnKS5hdHRyKCdocmVmJywgYmcucmVwbGFjZSgvWydcIl0rL2csICcnKSk7XHJcblxyXG5cclxuICAgIH0pXHJcbn1lbHNle1xyXG5cclxufVxyXG5cclxuLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgIE92ZXJsYXkgTWVudVxyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8gIFxyXG5pZiAoJCgnLm92ZXJsYXktbWVudScpLmxlbmd0aCkge1xyXG4gICAkKCcubWVudS1oYW1idWd1ZXInKS5jbGljayhmdW5jdGlvbihlKXtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICQoJ2JvZHknKS50b2dnbGVDbGFzcygnaXMtb3BlbicpXHJcbiAgIH0pXHJcbiAgICQoJy5jbG9zZS1idG4tbWVudScpLmNsaWNrKGZ1bmN0aW9uKGUpe1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJCgnYm9keScpLnRvZ2dsZUNsYXNzKCdpcy1vcGVuJylcclxuICAgfSlcclxufWVsc2V7XHJcblxyXG59Il19
